<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AigisPay - The Open Payment Trust Layer for P2P Trade</title>
    <style>
    /* Y Combinator body font: DM Sans for UI/body (headlines remain a strong sans) */
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100;300;400;500;600;700;900&display=swap');
    @import url('https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&display=swap');
    @import url('https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600&display=swap');
    @import url('https://fonts.googleapis.com/css2?family=Unica+One&display=swap');
        :root {
            --accent-green: #00d7b0;
            --accent-green-soft: #5fffdc;
            --accent-lime: #cfe680;
            --accent-deep: #00131a;
            --font-sans: Inter, system-ui, -apple-system, sans-serif;
            --font-display: Optima, sans-serif;
            --font-mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
            --font-logo: 'Unica One', 'Space Grotesk', Inter, system-ui, sans-serif;
            /* theme bases */
            --bg-starblue: #020612; /* deep starry 'midnight' (near-black, blue tint) */
            --bg-stargray: #0b0b10; /* alternative starry gray */
            --bg-primary: #000;
            --text-primary: #e6fff7;
            --text-secondary: #dff9ef;
            --muted: rgba(200,255,220,0.18);
        }

        body[data-theme="light"] {
            --bg-primary: #F2F2F7;
            --text-primary: #1c1c1e;
            --text-secondary: #3a3a3c;
        }

        body[data-theme="light"],
        body[data-theme="light"] * {
            text-shadow: none !important;
        }

        body[data-theme="light"] main.hero::before {
            opacity: 0.48 !important;
            background: radial-gradient(ellipse 60% 48% at 45% 32%, rgba(255, 135, 0, 0.28) 0%, rgba(255, 94, 188, 0.24) 26%, rgba(74, 144, 226, 0.20) 52%, rgba(120, 255, 214, 0.12) 70%, rgba(255, 255, 255, 0) 86%);
            filter: blur(22px);
        }

        body[data-theme="light"] #binaryLayer::before {
            opacity: 0.42 !important;
            background: radial-gradient(ellipse 58% 46% at 55% 28%, rgba(255, 135, 0, 0.26) 0%, rgba(255, 94, 188, 0.22) 30%, rgba(74, 144, 226, 0.18) 55%, rgba(120, 255, 214, 0.12) 78%, rgba(255, 255, 255, 0) 90%);
            filter: blur(20px);
        }

        body[data-theme="light"] .stream-column {
            filter: none !important;
            opacity: 0.16;
            mix-blend-mode: screen;
        }

        body[data-theme="light"] .stream-line {
            color: rgba(28, 28, 30, 0.26);
            text-shadow: none !important;
        }

        body[data-theme="light"] #networkCanvas {
            mix-blend-mode: screen;
            opacity: 0.42;
        }

        body[data-theme="light"] .flash-text {
            text-shadow: none !important;
            filter: none !important;
            opacity: 0.35;
        }

        body {
            margin: 0;
            /* typography: use a clean, neutral sans for all non-hero text */
            /* match YC: DM Sans for UI/body, fallback to system sans */
            font-family: var(--font-sans);
            /* forced pure black background */
            background: var(--bg-primary) !important;
            color: var(--text-primary);
            min-height: 100vh;
            text-align: left;
            padding: 0 0 0 20px;
            position: relative;
            overflow-x: hidden;
            display: block; /* restore normal document flow so page can scroll */
            text-shadow: 0 0 6px rgba(0, 0, 0, 0.25);
        }

        body[data-theme="light"] {
            text-shadow: none;
        }

        body::before {
            /* disable decorative star field to ensure pure black background */
            content: '';
            position: fixed;
            inset: 0;
            opacity: 0 !important;
            z-index: -3;
            pointer-events: none;
        }

        body::after {
            /* disable decorative aurora layer */
            content: '';
            position: fixed;
            inset: -10%;
            opacity: 0 !important;
            z-index: -2;
            pointer-events: none;
        }

    header {
            position: absolute;
            top: 20px;
            left: 20px;
            font-weight: 500;
            font-size: 1.2rem;
            color: var(--text-primary);
        /* modern, minimalist logotype */
        font-family: var(--font-display);
            z-index: 10;
            text-align: left;
            letter-spacing: 0.06em;
            text-transform: uppercase;
            display: inline-flex;
            align-items: center;
            gap: 0.65rem;
            padding: 0.4rem 0.75rem;
            border-radius: 999px;
            background: transparent;
            border: none;
            backdrop-filter: none;
            box-shadow: none;
            text-shadow: none;
        }

        .theme-toggle {
            position: fixed;
            top: 18px;
            right: 18px;
            z-index: 2000;
            width: 38px;
            height: 18px;
            padding: 0;
            border-radius: 999px;
            border: 1px solid rgba(255, 255, 255, 0.32);
            background: transparent;
            cursor: pointer;
            appearance: none;
            -webkit-appearance: none;
            pointer-events: auto;
            will-change: transform;
            transform: translate3d(0, 0, 0);
            transition: opacity 0.22s ease, transform 0.22s ease;
        }

        .theme-toggle:focus-visible {
            outline: 2px solid rgba(0, 215, 176, 0.55);
            outline-offset: 3px;
        }

        .theme-toggle::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 3px;
            width: 12px;
            height: 12px;
            border-radius: 999px;
            transform: translateY(-50%);
            background: rgba(255, 255, 255, 0.92);
            transition: left 0.18s ease, background 0.18s ease;
        }

        body[data-theme="light"] .theme-toggle {
            border: 1px solid rgba(0, 0, 0, 0.24);
            background: transparent;
        }

        body[data-theme="light"] .theme-toggle::before {
            left: 23px;
            background: rgba(28, 28, 30, 0.92);
        }

        .theme-toggle.is-hidden {
            opacity: 0;
            transform: translate3d(0, -10px, 0);
            pointer-events: none;
        }

        header .logo-core {
            letter-spacing: 0.08em;
            font-size: 1.1rem;
        }

        header .logo-tag {
            font-family: 'Space Grotesk', var(--font-display);
            letter-spacing: 0.2em;
            font-size: 0.72rem;
            padding: 0.1rem 0.65rem;
            border: 1px solid rgba(0, 215, 176, 0.35);
            border-radius: 999px;
            background: linear-gradient(120deg, rgba(0, 215, 176, 0.25), rgba(143, 255, 215, 0.05));
            text-transform: uppercase;
            color: var(--text-primary);
        }

        main h2 {
            /* display heading: use a strong sans (DM Sans / Inter) like YC */
            font-family: var(--font-display);
            font-weight: 700;
            /* keep it large and prominent */
            font-size: clamp(2rem, 4.2vw, 3.6rem);
            color: var(--text-primary);
            /* left-align headline in the left content area */
            text-align: left;
            z-index: 10;
            position: relative;
            text-shadow: 0 8px 22px rgba(0, 0, 0, 0.7), 0 0 12px rgba(0, 200, 133, 0.12);
            letter-spacing: -0.02em;
            line-height: 1.15;
            margin: 0 0 12px;
            display: block;
            /* allow wrapping and ensure true left alignment */
            white-space: normal;
            overflow: visible;
            text-overflow: clip;
            max-width: 1100px; /* match description max width for consistent left edge */
        }

        main.hero {
            padding: 8px 22px 40px;
            width: 100%;
            max-width: 1100px;
            display: flex;
            flex-direction: column;
            /* vertically center but align content to the left area */
            align-items: flex-start;
            /* override body centering so this hero block can sit left */
            align-self: flex-start;
            justify-content: center;
            text-align: left;
            gap: 14px;
            position: relative;
            z-index: 5;
            margin: 0;
            /* rely on the left-column padding to create the left gutter */
            padding-left: 0;
            flex: 1;
        }

        main.hero::before {
            content: '';
            position: absolute;
            width: 150%;
            height: 155%;
            max-width: 1200px;
            border-radius: 999px;
            top: -12%;
            left: -22%;
            background: radial-gradient(ellipse 62% 48% at 45% 35%, rgba(0, 215, 176, 0.22) 0%, rgba(1, 75, 40, 0.72) 18%, rgba(1, 35, 22, 0.30) 44%, rgba(1, 15, 10, 0) 76%);
            filter: blur(22px);
            opacity: 0.5;
            z-index: -1;
            pointer-events: none;
        }

        footer {
            position: absolute;
            bottom: 10px;
            left: 20px;
            z-index: 10;
            font-size: 0.875rem !important;
            width: auto !important;
            margin: 0 !important;
            text-align: left !important;
        }

        .footer-contact {
            position: absolute;
            bottom: 10px;
            right: 20px;
            z-index: 10;
            cursor: pointer;
            user-select: none;
            font-size: 0.875rem !important;
            width: auto !important;
            margin: 0 !important;
            text-align: right !important;
        }

        .footer-contact:hover,
        .footer-contact:focus-visible {
            outline: none;
        }

        .contact-toast {
            position: fixed;
            bottom: 80px;
            right: 32px;
            background: rgba(0, 0, 0, 0.8);
            color: var(--text-primary);
            padding: 0.65rem 1rem;
            border-radius: 999px;
            border: 1px solid rgba(95, 255, 220, 0.35);
            font-size: 0.78rem;
            font-family: var(--font-mono);
            opacity: 0;
            transform: translateY(10px);
            pointer-events: none;
            transition: opacity 0.2s ease, transform 0.2s ease;
        }

        .contact-toast.is-visible {
            opacity: 1;
            transform: translateY(0);
        }

        .main-description {
            color: var(--text-secondary);
            /* body copy: DM Sans (match YC) */
            font-family: var(--font-display);
            font-weight: 300;
            font-size: 1.06rem;
            margin: 0 0 6px 0;
            max-width: 1100px;
            line-height: 1.8; /* comfortable for reading */
            letter-spacing: 0.2px;
            text-align: left;
            padding: 6px 0 0 0;
        }

        .main-description span {
            display: block;
            margin-bottom: 10px; /* add extra breathing room between lines */
        }

        .secondary-tagline {
            color: rgba(28, 28, 30, 0.88);
            /* use DM Sans for tagline text to match YC body style */
            font-family: var(--font-sans);
            font-weight: 500;
            font-size: 0.95rem;
            margin: 12px auto 0;
            max-width: 720px;
            letter-spacing: 0.3px;
            text-shadow: 0 0 8px rgba(0,0,0,0.35);
            border-top: 1px solid rgba(200,255,220,0.04);
            padding-top: 12px;
            line-height: 1.45;
        }
        
        @media (max-width: 768px) {
            main h2 {
                font-size: 2rem;
                white-space: normal;
                display: block;
                margin: 0 auto;
                width: 100%;
            }

            main.hero {
                width: 100%;
                max-width: 100%;
            }

            /* stack columns on small screens */
            .page-split {
                display: block;
                margin-right: 0;
            }

            .left-column, .right-column {
                width: 100%;
                flex: none;
                min-width: 0;
                padding-left: 20px;
                padding-right: 0;
                margin-right: 0; /* remove right-column offset on mobile */
            }

            .right-column {
                position: relative;
                height: auto;
            }

            #binaryLayer, #networkCanvas {
                position: relative;
                width: 100%;
                height: 260px;
            }

        }

        #networkCanvas {
            position: fixed;
            inset: 0;
            width: 100vw;
            height: 100vh;
            pointer-events: none;
            z-index: -1;
            mix-blend-mode: screen;
            opacity: 0.92;
        }

        #binaryLayer {
            /* limit binary stream visuals to the right third of the viewport */
            position: fixed;
            top: 0;
            right: 0;
            width: 34vw; /* roughly one third */
            max-width: 420px;
            min-width: 260px;
            height: 100vh;
            overflow: hidden;
            pointer-events: none;
            z-index: -2;
            mix-blend-mode: screen;
            opacity: 0.9;
            isolation: isolate;
        }

        #binaryLayer::before {
            content: '';
            position: absolute;
            inset: -18% -22% -18% -22%;
            border-radius: 999px;
            background: radial-gradient(ellipse 62% 48% at 55% 30%, rgba(0, 215, 176, 0.32) 0%, rgba(1, 75, 40, 0.78) 20%, rgba(1, 35, 22, 0.28) 46%, rgba(1, 15, 10, 0) 76%);
            filter: blur(18px);
            opacity: 0.95;
            z-index: -1;
            pointer-events: none;
        }

        .stream-column {
            position: absolute;
            top: 0;
            /* width is set dynamically based on available layer width to avoid overlap */
            width: auto;
            opacity: 0.22;
            filter: drop-shadow(0 0 18px rgba(0, 200, 133, 0.45));
            mix-blend-mode: screen;
            box-sizing: border-box;
            overflow: hidden; /* ensure content never escapes column bounds */
        }

        .stream-content {
            display: flex;
            flex-direction: column;
            animation: scrollUp linear infinite;
        }

        .stream-line {
            font-family: 'JetBrains Mono', 'Space Mono', monospace;
            font-size: 13px;
            line-height: 2.4;
            color: rgba(210, 255, 170, 0.6);
            text-shadow: 0 0 12px rgba(0, 200, 133, 0.35);
            /* avoid horizontal overflow: keep single-line and clip */
            white-space: nowrap;
            overflow: hidden;
            text-overflow: clip;
        }

        #flashLayer {
            position: fixed;
            inset: 0;
            pointer-events: none;
            z-index: 0;
        }

        .flash-text {
            position: absolute;
            font-family: 'JetBrains Mono', 'Space Mono', monospace;
            font-size: 11px;
            color: rgba(182, 255, 120, 0.8);
            text-shadow: 0 0 6px rgba(0, 200, 133, 0.25);
            filter: blur(0.4px);
            animation: flashPulse 0.9s ease-in-out forwards;
        }

        @keyframes auroraBreath {
            0% {
                transform: translate3d(0, 0, 0) scale(1);
                opacity: 0.75;
            }
            100% {
                transform: translate3d(0, -3%, 0) scale(1.06);
                opacity: 1;
            }
        }

        @keyframes scrollUp {
            0% {
                transform: translateY(0);
            }
            100% {
                transform: translateY(-50%);
            }
        }

        @keyframes flashPulse {
            0% {
                opacity: 0;
                transform: scale(0.92);
            }
            30% {
                opacity: 1;
                transform: scale(1);
            }
            70% {
                opacity: 0.9;
                transform: scale(1.04);
            }
            100% {
                opacity: 0;
                transform: scale(0.95);
            }
        }
        /* Additional styles for cool flowing rays */
        /* New content section styles: ensure all text is left-aligned and constrained to the left column */
        .content-section {
            max-width: 1100px;
            width: 100%;
            margin-left: 0;
            margin-right: 0;
            margin-top: 28px;
            margin-bottom: 18px;
            text-align: left;
            z-index: 6;
            position: relative;
            padding: 6px 0;
            /* match YC: use DM Sans for content sections */
            font-family: var(--font-sans);
            color: var(--text-primary);
        }

        .section-title {
            /* section headings: use the sans display (DM Sans) */
            font-family: var(--font-display);
            font-weight: 700;
            font-size: clamp(1.15rem, 2.2vw, 1.5rem);
            margin: 0 0 10px 0;
            line-height: 1.15;
            text-align: left;
            letter-spacing: -0.2px;
        }

        .section-paragraph {
            /* body copy: DM Sans */
            font-family: var(--font-display);
            font-weight: 400;
            font-size: 1.02rem;
            color: var(--text-secondary);
            line-height: 1.8;
            margin: 0 0 10px 0;
            text-align: left;
        }

        .feature-list {
            margin: 8px 0 0 0;
            padding-left: 20px;
            color: var(--text-secondary);
            line-height: 1.7;
            font-family: var(--font-display);
        }

        .feature-list li {
            margin-bottom: 8px;
        }

        /* prevent the first headline line from breaking into multiple lines */
        .no-break {
            display: inline-block;
            white-space: nowrap;
            vertical-align: middle;
        }

        /* helper for the second line of the hero headline */
        .hero-line {
            display: block;
        }
        
        /* Split-screen layout: left content column, right visuals column */
        .page-split {
            display: flex;
            width: 100%;
            align-items: stretch;
            justify-content: flex-start;
            margin-right: -20px;
        }

        .left-column {
            flex: 1 1 auto; /* main content column */
            display: block;
            padding: 48px 6vw;
            box-sizing: border-box;
            z-index: 5;
            margin-right: 0; /* allow content to flow full width so sections stack vertically */
        }

        .right-column {
            width: 100%;
            min-width: 0;
            position: relative; /* make visuals flow with the page (not fixed)
                                   so each section scrolls normally */
            height: auto;
            overflow: hidden;
            z-index: 1;
            display: block;
        }

        /* constrain visuals to the right column instead of full viewport */
        #networkCanvas {
            position: absolute;
            inset: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
            mix-blend-mode: screen;
            opacity: 0.92;
        }

        #binaryLayer {
            position: absolute;
            top: 0;
            right: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            pointer-events: none;
            z-index: -2;
            mix-blend-mode: screen;
            opacity: 0.9;
        }

        /* Make each major block occupy a full viewport height so the page can scroll per-section */
        main.hero, .content-section {
            min-height: 100vh;
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
            justify-content: center;
            padding-top: 48px;
            padding-bottom: 48px;
        }

        /* scroll snap for nicer one-screen-per-section behavior */
        html, body {
            scroll-behavior: smooth;
        }

        body {
            scroll-snap-type: y mandatory;
        }

        main.hero, .content-section {
            scroll-snap-align: start;
        }
    </style>
</head>
<body data-theme="dark" style="background-image: none !important; font-family: Inter, system-ui, -apple-system, sans-serif !important;">
    <header style="font-family: var(--font-display); font-weight: 500; letter-spacing: 0.08em; text-transform: uppercase; color: var(--text-primary); font-size: 1.4rem; text-decoration: none;">
        AigisPay
    </header>
    <button class="theme-toggle" id="themeToggle" type="button" aria-label="Toggle theme" aria-pressed="false"></button>
    <div class="page-split">
        <div class="left-column">
            <main class="hero">
                <h2><span class="no-break">The Open Trust Layer</span><span class="hero-line">for P2P Commerce</span></h2>
                <div class="main-description">
                    <span>Built programmable trust for individuals to go global in the human–AI symbiotic era</span>
                    <span>With conditional settlement, user-owned on-chain credit score, AI dispute resolution and fiat-stablecoin interoperability</span>
                </div>
            </main>

            <section class="content-section" id="section-2">
                <h3 class="section-title">The P2P economy is booming, but legacy payments fail individuals</h3>
                <p class="section-paragraph">The pandemic made digital nomadism a global norm. AI is accelerating this by amplifying individual capability and creativity, fueling the rise of P2P commerce, on platforms, safe but expensive, and social networks, cheap but risky.</p>
                <p class="section-paragraph">Traditional payment rails like Stripe, Airwallex were built for platforms, not individuals. User reputation is locked within platforms cannot be reused across different trading contexts.</p>
                <p class="section-paragraph">The most commonly used payments now in P2P commerce are PayPal, Venmo, Cash App and crypto wallets, which were all built for pure transfer, not commerce.</p>
            </section>

            <section class="content-section" id="section-3">
                <h3 class="section-title">Purpose-built trust and settlement layer for individuals</h3>
                <p class="section-paragraph">Designed for high-frequency, cross-border P2P commerce involving virtual items and freelance services, delivering:</p>
                <ul class="feature-list">
                    <li><strong>Conditional Settlements:</strong> We enable agent- and smart-contract–based payments that make transactions fast, cheap, and safe.</li>
                    <li><strong>User-Owned On-chain Credit Score:</strong> We build portable, cumulative, on-chain reputation identities for individuals, also synced with their personal agents to create a frictionless trading environment, especially for emerging markets.</li>
                    <li><strong>AI Dispute Resolution:</strong> Automated and fair resolution mechanisms designed for decentralized P2P commerce.</li>
                    <li><strong>Fiat-Stablecoin Interoperability:</strong> Seamless conversion and interaction between traditional currency and stablecoins.</li>
                </ul>
            </section>

            <section class="content-section" id="section-4">
                <h3 class="section-title">Mission</h3>
                <p class="section-paragraph">Aigis Labs is on a mission to build a decentralized economy for the rest of us, bringing the best product design and technology to empower all individuals.</p>
                <p class="section-paragraph">We are serial founders from YC, Amazon, and Google with deep experience in marketplaces and consumer products across AI and crypto, deep understanding and a genuine obsession with individual users.</p>
            </section>
        </div>

        <div class="right-column" aria-hidden="true">
            <canvas id="networkCanvas"></canvas>
            <div id="binaryLayer"></div>
            <div id="flashLayer"></div>
        </div>
    </div>

    <footer style="font-family: var(--font-display); color: var(--text-primary); display: block; width: 100%; text-align: center; margin: 40px auto;">&copy; 2025 Aigis Labs. All rights reserved.</footer>
    <div class="footer-contact" id="contactUsButton" role="button" tabindex="0" style="font-family: var(--font-display); color: var(--text-primary); display: block; width: 100%; text-align: center; margin: 40px auto;">Contact Us</div>
    <div class="contact-toast" id="contactToast" role="status" aria-live="polite">Email copied: sequoiayao@gmail.com</div>
    <script>
        const binaryLayer = document.getElementById('binaryLayer');
        const flashLayer = document.getElementById('flashLayer');
        const networkCanvas = document.getElementById('networkCanvas');
        const networkCtx = networkCanvas?.getContext('2d');
        const THEME_STORAGE_KEY = 'theme';
        const isProductionRuntime = (() => {
            const hostname = window.location.hostname;
            if (!hostname || hostname === 'localhost' || hostname === '127.0.0.1') return false;
            if (hostname.startsWith('192.168.') || hostname.startsWith('10.') || hostname.endsWith('.local')) return false;
            return true;
        })();
        const themeStorage = {
            get(key) {
                try {
                    return localStorage.getItem(key);
                } catch {
                    return null;
                }
            },
            set(key, value) {
                try {
                    localStorage.setItem(key, value);
                } catch {
                    /* no-op if storage is unavailable */
                }
            }
        };
        const basePatterns = [
            '[ SYSTEM_CORE_ACTIVE ]',
            '[ QUANTUM_SYNC_ENABLED ]',
            '[ NEURAL_BRIDGE_CONNECTED ]',
            '[ MEMORY_BUFFER_STABLE ]',
            '> initializing_neural_pathways',
            '> optimizing_quantum_states',
            '[ SYNAPTIC_LINK_VERIFIED ]',
            '[ CONSCIOUSNESS_MATRIX_STABLE ]',
            '> calibrating_ai_cores',
            '[ QUANTUM_ENTANGLEMENT_READY ]'
        ];
        const flashTerms = [
            '[ QUANTUM_SUPREMACY_ACHIEVED ]',
            '[ NEURAL_BREAKTHROUGH_DETECTED ]',
            '[ CONSCIOUSNESS_EMERGENCE_WARNING ]',
            '[ LEDGER_BLOCK_SEALED ]',
            '[ TRUST_GRAPH_REINFORCED ]',
            '[ CRYPTO_FIAT_BRIDGE_READY ]'
        ];
        const dynamicGenerators = [
            () => `[ NEURAL_SYNC: ${(Math.random() * 0.2 + 0.8).toFixed(3)} ]`,
            () => `[ SYNAPSE_ACTIVITY: ${Math.floor(Math.random() * 1000 + 9000)} ]`,
            () => `[ NEURAL_PLASTICITY: ${(Math.random() * 0.3 + 0.7).toFixed(2)} ]`,
            () => `[ QUANTUM_ENTANGLEMENT: ${(Math.random() * 20 + 80).toFixed(1)}% ]`,
            () => `[ QUBIT_COHERENCE: ${(Math.random() * 0.1 + 0.9).toFixed(3)} ]`,
            () => `[ QUANTUM_STATE_VECTOR: ${Math.floor(Math.random() * 1000)}q ]`,
            () => `[ DEEP_LEARNING_DEPTH: ${Math.floor(Math.random() * 100 + 900)} ]`,
            () => `[ ATTENTION_ENTROPY: ${(Math.random() * 0.5 + 0.5).toFixed(3)} ]`,
            () => `[ MODEL_TEMPERATURE: ${(Math.random() * 0.7 + 0.3).toFixed(2)} ]`
        ];
        let flashInterval;
        let networkNodes = [];

        function buildStreams() {
            if (!binaryLayer) return;
            binaryLayer.innerHTML = '';
            // use binaryLayer width so stream columns fill only the right column area
            const layerWidth = (binaryLayer.clientWidth && binaryLayer.clientWidth > 0) ? binaryLayer.clientWidth : window.innerWidth;
            // estimate desired column width and cap columns to avoid overlaps
            const desiredColWidth = 160; // px per column target
            const maxCols = 6; // don't create too many columns
            let columnCount = Math.max(1, Math.floor(layerWidth / desiredColWidth));
            columnCount = Math.min(columnCount, maxCols);
            for (let i = 0; i < columnCount; i++) {
                const column = document.createElement('div');
                column.className = 'stream-column';
                // place and size columns relative to the binaryLayer area to avoid overlap
                column.style.left = `${(i / columnCount) * 100}%`;
                column.style.width = `${100 / columnCount}%`;
                column.style.animationDuration = `${120 + Math.random() * 40}s`;
                column.style.animationDelay = `${Math.random() * 60}s`;

                const content = document.createElement('div');
                content.className = 'stream-content';
                content.style.animationDuration = `${120 + Math.random() * 60}s`;
                const lines = generateLines();
                content.innerHTML = lines + lines;
                column.appendChild(content);
                binaryLayer.appendChild(column);
            }
        }

        function generateLines() {
            const count = 28;
            let html = '';
            for (let i = 0; i < count; i++) {
                const base = basePatterns[Math.floor(Math.random() * basePatterns.length)];
                const dynamic = dynamicGenerators[Math.floor(Math.random() * dynamicGenerators.length)]();
                html += `<span class="stream-line">${Math.random() > 0.5 ? dynamic : base}</span>`;
            }
            return html;
        }

        function spawnFlash() {
            if (!flashLayer || flashLayer.childElementCount >= 8) return;
            const element = document.createElement('div');
            element.className = 'flash-text';
            element.textContent = flashTerms[Math.floor(Math.random() * flashTerms.length)];
            const pos = getFlashPosition();
            element.style.top = `${pos.top}%`;
            element.style.left = `${pos.left}%`;
            flashLayer.appendChild(element);
            element.addEventListener('animationend', () => element.remove());
        }

        function getFlashPosition() {
            const existing = Array.from(flashLayer.children).map(child => ({
                top: parseFloat(child.style.top) || 0,
                left: parseFloat(child.style.left) || 0
            }));
            for (let attempt = 0; attempt < 40; attempt++) {
                const candidate = { top: Math.random() * 80 + 5, left: Math.random() * 80 + 10 };
                const overlaps = existing.some(pos => Math.abs(pos.top - candidate.top) < 8 && Math.abs(pos.left - candidate.left) < 10);
                if (!overlaps) return candidate;
            }
            return { top: Math.random() * 80 + 5, left: Math.random() * 80 + 10 };
        }

        function startFlashLoop() {
            if (flashInterval) clearInterval(flashInterval);
            flashInterval = setInterval(spawnFlash, 1200);
        }

        function resizeNetworkCanvas() {
            if (!networkCanvas) return;
            const container = document.querySelector('.right-column') || document.body;
            // size the canvas to the right-column visuals area
            networkCanvas.width = Math.max(1, container.clientWidth);
            networkCanvas.height = Math.max(1, container.clientHeight);
        }

        function createNode() {
            const speed = 0.15 + Math.random() * 0.35;
            const angle = Math.random() * Math.PI * 2;
            return {
                x: Math.random() * networkCanvas.width,
                y: Math.random() * networkCanvas.height,
                vx: Math.cos(angle) * (speed * (0.6 + Math.random() * 0.6)),
                vy: Math.sin(angle) * (speed * (0.6 + Math.random() * 0.6)),
                radius: 0.8 + Math.random() * 0.9,
                glow: 0.08 + Math.random() * 0.18
            };
        }

        function rebuildNetworkNodes() {
            if (!networkCanvas) return;
            const container = document.querySelector('.right-column') || document.body;
            // further reduce node count to make the dot matrix sparser; base on visuals width
            const count = (container.clientWidth && container.clientWidth < 768) ? 10 : 18;
            networkNodes = Array.from({ length: count }, createNode);
        }

        function updateNetworkScene() {
            if (!networkCtx || !networkCanvas) return;
            const width = networkCanvas.width;
            const height = networkCanvas.height;
            networkCtx.clearRect(0, 0, width, height);

            const theme = document.body.getAttribute('data-theme') || 'dark';
            const isLight = theme === 'light';
            const linkBase = isLight ? 0.10 : 0.08;
            const nodeBase = isLight ? 0.20 : 0.18;
            const nodeShadowColor = isLight ? 'rgba(255, 255, 255, 0)' : 'rgba(120, 255, 215, 0.45)';

            networkNodes.forEach(node => {
                node.x += node.vx;
                node.y += node.vy;
                if (node.x <= 0 || node.x >= width) node.vx *= -1;
                if (node.y <= 0 || node.y >= height) node.vy *= -1;
            });

            for (let i = 0; i < networkNodes.length; i++) {
                for (let j = i + 1; j < networkNodes.length; j++) {
                    const a = networkNodes[i];
                    const b = networkNodes[j];
                    const dx = a.x - b.x;
                    const dy = a.y - b.y;
                    const dist = Math.sqrt(dx * dx + dy * dy);
                    // only draw short connections to reduce clutter
                    const connectThreshold = 90; // shorter distance
                    if (dist < connectThreshold) {
                        const strength = 1 - dist / connectThreshold;
                        networkCtx.beginPath();
                        networkCtx.moveTo(a.x, a.y);
                        networkCtx.lineTo(b.x, b.y);
                        if (isLight) {
                            const hue = (200 + ((a.x + b.y) % 120)) % 360;
                            networkCtx.strokeStyle = `hsla(${hue}, 85%, 55%, ${linkBase * strength})`;
                        } else {
                            networkCtx.strokeStyle = `rgba(140, 255, 215, ${linkBase * strength})`;
                        }
                        networkCtx.lineWidth = 0.6;
                        networkCtx.stroke();
                    }
                }
            }

            networkNodes.forEach(node => {
                networkCtx.beginPath();
                networkCtx.arc(node.x, node.y, node.radius, 0, Math.PI * 2);
                if (isLight) {
                    const hue = (180 + ((node.x + node.y) % 140)) % 360;
                    networkCtx.fillStyle = `hsla(${hue}, 92%, 52%, ${nodeBase + node.glow * 0.55})`;
                    networkCtx.shadowBlur = 0;
                    networkCtx.shadowColor = nodeShadowColor;
                } else {
                    networkCtx.fillStyle = `rgba(140, 255, 215, ${nodeBase + node.glow})`;
                    networkCtx.shadowBlur = 8;
                    networkCtx.shadowColor = nodeShadowColor;
                }
                networkCtx.fill();
                networkCtx.shadowBlur = 0;
            });

            requestAnimationFrame(updateNetworkScene);
        }

        function showContactToast() {
            const toast = document.getElementById('contactToast');
            if (!toast) return;
            toast.classList.add('is-visible');
            clearTimeout(showContactToast.timeoutId);
            showContactToast.timeoutId = setTimeout(() => {
                toast.classList.remove('is-visible');
            }, 2400);
        }

        async function handleContactClick() {
            const email = 'sequoiayao@gmail.com';
            try {
                await navigator.clipboard.writeText(email);
                showContactToast();
            } catch (err) {
                window.location.href = `mailto:${email}`;
            }
        }

        function handleContactKeydown(event) {
            if (event.key === 'Enter' || event.key === ' ') {
                event.preventDefault();
                handleContactClick();
            }
        }

        function handleResize() {
            buildStreams();
            resizeNetworkCanvas();
            rebuildNetworkNodes();
        }

        window.addEventListener('resize', handleResize);
        window.addEventListener('load', () => {
            const themeToggle = document.getElementById('themeToggle');
            const storedTheme = themeStorage.get(THEME_STORAGE_KEY);
            if (isProductionRuntime) {
                document.body.setAttribute('data-theme', 'dark');
                if (storedTheme !== 'dark') {
                    themeStorage.set(THEME_STORAGE_KEY, 'dark');
                }
            } else if (storedTheme === 'light' || storedTheme === 'dark') {
                document.body.setAttribute('data-theme', storedTheme);
            } else {
                document.body.setAttribute('data-theme', 'dark');
                themeStorage.set(THEME_STORAGE_KEY, 'dark');
            }
            if (themeToggle) {
                const syncToggleA11y = () => {
                    const isLight = document.body.getAttribute('data-theme') === 'light';
                    themeToggle.setAttribute('aria-pressed', String(isLight));
                    themeToggle.setAttribute('title', isLight ? 'Switch to dark' : 'Switch to light');
                };
                syncToggleA11y();
                themeToggle.addEventListener('click', () => {
                    const nextTheme = document.body.getAttribute('data-theme') === 'light' ? 'dark' : 'light';
                    document.body.setAttribute('data-theme', nextTheme);
                    themeStorage.set(THEME_STORAGE_KEY, nextTheme);
                    syncToggleA11y();
                });
                let scrollHideTimeout;
                const revealToggle = () => themeToggle.classList.remove('is-hidden');
                const hideWhileScrolling = () => {
                    themeToggle.classList.add('is-hidden');
                    clearTimeout(scrollHideTimeout);
                    scrollHideTimeout = setTimeout(revealToggle, 220);
                };
                window.addEventListener('scroll', hideWhileScrolling, { passive: true });
            }
            handleResize();
            startFlashLoop();
            updateNetworkScene();
            const contactButton = document.getElementById('contactUsButton');
            contactButton?.addEventListener('click', handleContactClick);
            contactButton?.addEventListener('keydown', handleContactKeydown);
        });
    </script>
</body>
</html>
